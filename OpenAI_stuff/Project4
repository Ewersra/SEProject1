#Rylie Ewers, Decker Gramlich
#cs325 project 4

import openai

#key to the opanai API
openai.api_key = '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'

#open comments file (from Rylie's project 3) and turns it into a list
file = open("comments.txt", "r")
text = file.read()
file.close()
comments = text.split('\n\n')

#takes the comments list and add the prompt to it
prompts = []
#for i in range(0, len(comments)):
for i in range(0, 20):
    prompts.append('Tell me in one word(positive, negative, or neutral), what is the sentiment of this comment: "' + comments[i].strip() + '"?')

#makes a call to the openai API with the list and returns responses
response = openai.Completion.create(
    model="text-davinci-003",
    prompt = prompts,
    max_tokens = 3000
)

#takes the responses and puts them in its own file
file = open("sentiments", "w")
for i in range (0, len(response.choices)):
    file.write(response.choices[i].text.strip())
    file.write(' ')
file.close()
